@for (group of groupKeys.sort(); track group) {
<div>
  <h3 class="text-center">{{ getGroupTitle(group) }}</h3>
  <form [formGroup]="formDeparture" class="d-flex flex-column justify-center">
    @for (days of filterControlsByGroup(group); track days; let i = $index) {
    <div class="input-group input-group-sm py-2 departure-input">
      <span class="input-group-text">
        <input
          type="date"
          class="form-control"
          placeholder="Día"
          [value]="days.get('date')?.value || ''"
          (change)="onChangeInput($event, 'date', i, group)"
        />
      </span>
      <span class="input-group-text">
        <input
          type="time"
          aria-label="schedule"
          class="form-control"
          placeholder="Horario"
          [value]="days.get('schedule')?.value || ''"
          (change)="onChangeInput($event, 'schedule', i, group)"
        />
      </span>
      <input
        type="text"
        aria-label="driver"
        class="form-control"
        placeholder="Conductor"
        [value]="days.get('driver')?.value || ''"
        (change)="onChangeInput($event, 'driver', i, group)"
      />
      <input
        type="text"
        aria-label="point"
        class="form-control"
        placeholder="Punto de encuentro"
        [value]="days.get('point')?.value || ''"
        (change)="onChangeInput($event, 'point', i, group)"
      />
      <div class="m-0 p-0">
        <select
          class="custom-btn h-100 btn btn-light"
          [value]="days.get('location')?.value || ''"
          (change)="onChangeInput($event, 'location', i, group)"
        >
          <option disabled selected>Seleccionar localidad</option>
          <option value="TerritorioW">Wheelwright</option>
          <option value="TerritorioR">Rural</option>
        </select>
      </div>
      <div class="m-0 p-0">
        <select
          class="custom-btn h-100 btn btn-light"
          [value]="days.get('territory')?.value || ''"
          (change)="onChangeInput($event, 'territory', i, group)"
        >
          <option disabled selected>Seleccionar territorio</option>
          <option value="N°1">N°1</option>
          <option value="N°2">N°2</option>
          <option value="N°3">N°3</option>
          <option value="N°4">N°4</option>
          <option value="N°5">N°5</option>
          <option value="N°6">N°6</option>
          <option value="N°7">N°7</option>
          <option value="N°8">N°8</option>
          <option value="N°9">N°9</option>
          <option value="N°10">N°10</option>
          <option value="N°11">N°11</option>
          <option value="N°12">N°12</option>
          <option value="N°13">N°13</option>
          <option value="N°14">N°14</option>
          <option value="N°15">N°15</option>
          <option value="N°16">N°16</option>
          <option value="N°17">N°17</option>
          <option value="N°18">N°18</option>
          <option value="N°19">N°19</option>
          <option value="N°20">N°20</option>
          <option value="N°21">N°21</option>
          <option value="N°22">N°22</option>
          <option value="N°23">N°23</option>
        </select>
      </div>
      <div class="m-0 p-0">
        <select
          class="form-select custom-btn h-100 me-5"
          [class]="'btn btn-square btn-' + days.get('color')?.value"
          (change)="onChangeColor($event, i, group)"
        >
          <option [value]="'secondary'" disabled selected>
            Seleccionar color
          </option>
          <option value="primary">Azul</option>
          <option value="secondary">Gris</option>
          <option value="success">Verde</option>
          <option value="danger">Rojo</option>
          <option value="warning">Amarillo</option>
          <option value="info">Celeste</option>
          <option value="light">Blanco</option>
          <option value="dark">Negro</option>
        </select>
      </div>
      <button
        type="button"
        class="btn btn-danger"
        (click)="deleteInputForm(i, group)"
      >
        Quitar
      </button>
    </div>
    }
    <div class="modal-footer mx-4">
      <button
        type="button"
        class="btn btn-success text-center me-auto"
        (click)="addInputForm(group)"
      >
        Nueva salida +
      </button>
    </div>
    <hr />
  </form>
</div>
}
<div class="ms-4">
  <button type="submit" class="btn btn-success" (click)="addNewGroup()">
    Nuevo grupo +
  </button>
</div>
<div class="d-flex justify-content-center pb-3">
  <button type="submit" class="btn btn-primary" (click)="submitForm()">
    Guardar salidas
  </button>
</div>
