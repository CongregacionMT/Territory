<div class="container">
  <h1 class="text-center pb-2">Estadísticas de {{nameTitleTerritory}}</h1>
  <ng-container *ngIf="loadingData">
    <table
      class="table table-dark table-hover table-striped-columns"
      id="mi-tabla"
      cellspacing="0"
      cellpadding="0"
    >
      <thead>
        <tr style="cursor: pointer">
          <th (click)="sortTable('numberTerritory')">
            Territorio
            <i [class]="getIcon('numberTerritory')" aria-hidden="true"></i>
          </th>
          <th (click)="sortTable('completed')">
            Completado
            <i [class]="getIcon('completed')" aria-hidden="true"></i>
          </th>
          <th (click)="sortTable('applesData')">
            Cantidad de Manzanas
            <i [class]="getIcon('applesData')" aria-hidden="true"></i>
          </th>
          <th (click)="sortTable('driver')">
            último conductor asignado
            <i [class]="getIcon('driver')" aria-hidden="true"></i>
          </th>
          <th (click)="sortTable('start')">
            última vez asignado
            <i [class]="getIcon('start')" aria-hidden="true"></i>
          </th>
          <th (click)="sortTable('end')">
            última vez completado
            <i [class]="getIcon('end')" aria-hidden="true"></i>
          </th>
        </tr>
      </thead>
      <tbody>
        <tr
          *ngFor="let dataList of dataListFull | sortBy : path : order"
          [class]="'table-' + paintRow(dataList)"
        >
          <td>Número {{ dataList[0].numberTerritory }}</td>
          <td>{{ dataList[0].completed }}</td>
          <td>{{ dataList[0].applesData.length }} manzanas</td>
          <td>{{ dataList[0].driver }}</td>
          <td>{{ dataList[0].start | date : "dd-MM-yyyy" }}</td>
          <td>
            {{
              (dataList[0]?.end ||
              dataList[1]?.end ||
              dataList[2]?.end ||
              dataList[3]?.end ||
              dataList[4]?.end ||
              dataList[5]?.end
            ) | date : "dd-MM-yyyy"
            }}
          </td>
        </tr>
      </tbody>
    </table>
  </ng-container>
  <div>
    <div class="ms-3">
      <p><strong>Colores:</strong>&nbsp;<em>Los colores de la tabla indicarán el tiempo transcurrido desde la última actividad en cada territorio.</em></p>
    </div>
    <div>
      <ul>
        <li class="d-flex align-items-center mb-3">
          <i class="fas fa-circle me-2" style="color: #00ff00"></i>
          <strong>Verde:</strong>&nbsp;<em>Se completó hace menos de </em>
          <div class="input-group ms-3 me-3" style="width: 75px;">
            <input [formControl]="green" class="form-control" type="number">
          </div>
          <em>dias</em>
        </li>
        <li class="d-flex align-items-center mb-3">
          <i class="fas fa-circle me-2" style="color: #4193eb;"></i>
          <strong>Azul:</strong>&nbsp;<em>Se completó hace menos de </em>
          <div class="input-group ms-3 me-3" style="width: 75px;">
            <input [formControl]="blue" class="form-control" type="number">
          </div>
          <em>dias</em>
        </li>
        <li class="d-flex align-items-center mb-3">
          <i class="fas fa-circle me-2" style="color: #ffff00;"></i>
          <strong>Amarillo:</strong>&nbsp;<em>Se completó hace menos de </em>
          <div class="input-group ms-3 me-3" style="width: 75px;">
            <input [formControl]="yellow" class="form-control" type="number">
          </div>
          <em>dias</em>
        </li>
        <li class="d-flex align-items-center mb-3 pb-3">
          <i class="fas fa-circle me-2" style="color: #FF0000;"></i>
          <strong>Rojo:</strong>&nbsp;<em>Se completó hace más de </em>
          <div class="input-group ms-3 me-3" style="width: 75px;">
            <input [formControl]="red" class="form-control" type="number">
          </div>
          <em>dias</em>
        </li>
      </ul>
    </div>
  </div>
</div>
